<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accessible Kanban Board</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 20px;
        background: #f0f2f5;
      }
      h2 {
        text-align: center;
      }
      .board {
        display: flex;
        gap: 1rem;
        justify-content: center;
      }
      .column {
        background: #fff;
        border-radius: 8px;
        padding: 10px;
        width: 300px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .column h3 {
        text-align: center;
        margin-top: 0;
      }
      .task {
        background: #e4e7eb;
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        cursor: grab;
        outline: none;
      }
      .task:focus {
        border: 2px dashed #007bff;
        background: #d0e4ff;
      }
      .task.dragging {
        opacity: 0.5;
      }
      .column.drag-over {
        background: #e0ffe0;
      }
    </style>
  </head>
  <body>
    <h2>Accessible Kanban Board</h2>
    <div class="board" id="board"></div>

    <script>
      const data = {
        todo: [
          { id: "1", name: "Write Report", description: "Monthly financial report" },
          { id: "2", name: "Fix Bug", description: "Resolve login issue" },
        ],
        ongoing: [{ id: "3", name: "Design UI", description: "Landing page mockup" }],
        completed: [
          { id: "4", name: "Code Review", description: "Review teammate's PR" },
          { id: "5", name: "Team Meeting", description: "Weekly sync at 10am" },
        ],
      };

      const board = document.getElementById("board");
      const columns = ["todo", "ongoing", "completed"];
      const columnNames = {
        todo: "To Do",
        ongoing: "Ongoing",
        completed: "Completed",
      };

      function createTask(task) {
        const div = document.createElement("div");
        div.className = "task";
        div.draggable = true;
        div.tabIndex = 0;
        div.id = task.id;
        div.innerHTML = `<strong>${task.name}</strong><br/><small>${task.description}</small>`;

        // Drag-n-Drop Mouse
        div.addEventListener("dragstart", (e) => {
          div.classList.add("dragging");
          e.dataTransfer.setData("text/plain", task.id);
        });
        div.addEventListener("dragend", () => div.classList.remove("dragging"));

        // Keyboard interaction
        div.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            const currentCol = div.closest(".column");
            const currentIndex = columns.indexOf(currentCol.dataset.status);
            let nextIndex = -1;
            if (e.ctrlKey && e.shiftKey && currentIndex > 0) nextIndex = currentIndex - 1;
            else if (e.ctrlKey && currentIndex < columns.length - 1) nextIndex = currentIndex + 1;

            if (nextIndex >= 0) {
              const newCol = document.querySelector(
                `.column[data-status="${columns[nextIndex]}"] .task-list`
              );
              newCol.appendChild(div);
            }
          }
        });

        return div;
      }

      function renderBoard() {
        board.innerHTML = "";
        columns.forEach((col) => {
          const column = document.createElement("div");
          column.className = "column";
          column.dataset.status = col;
          column.innerHTML = `<h3>${columnNames[col]}</h3>`;
          const taskList = document.createElement("div");
          taskList.className = "task-list";

          data[col].forEach((task) => {
            const taskEl = createTask(task);
            taskList.appendChild(taskEl);
          });

          // Allow dropping
          column.addEventListener("dragover", (e) => {
            e.preventDefault();
            column.classList.add("drag-over");
          });
          column.addEventListener("dragleave", () => {
            column.classList.remove("drag-over");
          });
          column.addEventListener("drop", (e) => {
            e.preventDefault();
            const id = e.dataTransfer.getData("text/plain");
            const dragged = document.getElementById(id);
            taskList.appendChild(dragged);
            column.classList.remove("drag-over");
          });

          column.appendChild(taskList);
          board.appendChild(column);
        });
      }

      renderBoard();
    </script>
  </body>
</html>
